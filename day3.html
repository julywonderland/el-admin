<!DOCTYPE html>
<html>
<head>

<!-- 引入样式 -->
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<link rel="stylesheet" href="./cssVue/index.css" >
<!-- 引入样式 -->
<style>
    [v-cloak]{
        display: none;
    }

    .el-table .warning-row {
      background: oldlace;
    }
  
    .el-table .success-row {
      background: #f0f9eb;
    }
  </style>
</head>

<body>
    <div id="app">

        <el-container v-cloak>
            <el-aside width="200px">

                <i class="el-icon-edit"></i> 饿了么后台管理
                    
                <el-menu default-active="1"  @open="openMenu" >
                    <el-submenu index="1">

                        <template slot="title">
                            <i class="el-icon-location"></i>
                            <span>文章管理</span>
                        </template>

                        <el-menu-item-group>
                            <el-menu-item index="1-1" >分组一</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group>
                            <el-menu-item index="1-2" >分组二</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group >
                            <el-menu-item index="1-3">分组三</el-menu-item>
                        </el-menu-item-group>

                    </el-submenu>

                    <el-menu-item index="2">
                        <i class="el-icon-menu"></i>
                        <span slot="title">人员管理</span>
                    </el-menu-item>

                    <el-menu-item index="3">
                        <i class="el-icon-setting"></i>
                        <span slot="title">设置</span>
                    </el-menu-item>

                </el-menu>
            </el-aside>
            <el-container>
                <el-header>
                    <el-breadcrumb separator="/" width="90px"> 
                    <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
                    <el-breadcrumb-item>cnode</el-breadcrumb-item>
                    <el-breadcrumb-item>文章管理</el-breadcrumb-item>
                    <el-breadcrumb-item>列表</el-breadcrumb-item>
                    </el-breadcrumb>

                    <el-dropdown :hide-on-click="false"  >
                        <span class="el-dropdown-link">
                            下拉菜单<i class="el-icon-arrow-down el-icon--right"></i>
                        </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item>黄金糕</el-dropdown-item>
                            <el-dropdown-item>狮子头</el-dropdown-item>
                            <el-dropdown-item>螺蛳粉</el-dropdown-item>
                            <el-dropdown-item disabled>双皮奶</el-dropdown-item>
                            <el-dropdown-item divided>蚵仔煎</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </el-header>
           <el-main>
                <template>
                    <el-table
                    :data="tableData"
                    border
                    stripe
                    v-loading="isLoading"
                    style="width: 100%">
                    <el-table-column
                        prop="create_at"
                        label="日期"
                        width="180">
                    </el-table-column>
                    <el-table-column
                        prop="title"
                        label="标题"
                        width="180">
                    </el-table-column>
                    <el-table-column
                        prop="reply_count"
                        label="访问量">
                    </el-table-column>
                    </el-table>
                </template>


                <div class="block">

                        <!-- @size-change="activePageSize=$event"
                        @current-change="activePage=$event" -->
                    <el-pagination
                        
                        @size-change="changeSize"
                        @current-change="changeCurrent"

                        :current-page="activePage"
                        :page-size="activePageSize"

                        :page-sizes="[5,10,20,40]"
                        
                        layout="total, sizes, prev, pager, next, jumper"
                        :total="200">
                    </el-pagination>
                </div>
            </el-main>
        </el-container>
        </el-container>
        
    </div>
</body>
<!-- 引入组件库 -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    new Vue({
        el:"#app",
        data:function() {
            return {
                isLoading:false,
                tableData:[],
                activePage:1,       //当前页
                activePageSize:10,  //当前页显示多少条

                // tableData: [{
                //     date: '2016-05-02',
                //     name: '王小虎',
                //     address: '上海市普陀区金沙江路 1518 弄'
                //     }, {
                //     date: '2016-05-04',
                //     name: '王小虎',
                //     address: '上海市普陀区金沙江路 1517 弄'
                //     }, {
                //     date: '2016-05-01',
                //     name: '王小虎',
                //     address: '上海市普陀区金沙江路 1519 弄'
                //     }, {
                //     date: '2016-05-03',
                //     name: '王小虎',
                //     address: '上海市普陀区金沙江路 1516 弄'
                //     }]
            }
        },
        mounted(){
            this.getList();//初始化加载
        },
        methods:{
            openMenu:function(t){ //自动获取第一个参数
                this.$alert(t)
            },
            getList:function(){
                this.isLoading = true;
                axios.get('https://cnodejs.org/api/v1/topics', {
                    params: {
                        page: this.activePage,
                        limit: this.activePageSize
                    }
                })
                .then(function (res) {
                    this.isLoading = false;
                    this.tableData = res.data.data;
                }.bind(this));
            },
            
            changeSize:function(page){      //改变当前显示条数
                this.activePageSize = page;
            },
            changeCurrent:function(size){  //当前页码
                this.activePage = size;
            },
            
        },
        
        watch: {
            activePage(){
                this.getList();
            },
            activePageSize(){
                this.getList();
            }
        }

    });


</script>

</html>